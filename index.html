<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4-TRACK TAPE LOOPER</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header Transport Controls -->
    <header class="transport-bar">
        <div class="logo">
            <h1>4-TRACK LOOPER</h1>
        </div>
        <div class="transport-controls">
            <button id="play-all" class="transport-btn">PLAY</button>
            <button id="stop-all" class="transport-btn">STOP</button>
            <button id="clear-all" class="transport-btn">CLEAR</button>
            <button id="export-mix" class="transport-btn">EXPORT</button>
        </div>
        <div class="input-source-control">
            <label>INPUT
                <select id="audioSourceSelect" class="audio-source-select">
                    <option value="none">NONE</option>
                    <option value="microphone">MIC</option>
                    <option value="tab">TAB</option>
                </select>
            </label>
        </div>
        <div class="file-controls">
            <input type="file" id="file-input" accept="audio/*" multiple style="display: none;">
            <button id="load-files" class="transport-btn">LOAD</button>
        </div>
    </header>

    <!-- Main Mixer Console -->
    <div class="mixer-console">

        <!-- Track 1 Channel Strip -->
        <div class="channel-strip" data-track="0">
            <div class="strip-header">
                <h3>CH 1</h3>
                <div class="audio-indicator"></div>
                <div class="header-buttons">
                    <button class="rec-btn" data-track="0">REC</button>
                    <button class="mode-btn active" data-track="0">LOOP</button>
                </div>
            </div>

            <div class="strip-controls">
                <div class="control-group compressor-section">
                    <label>COMP</label>
                    <div class="comp-controls">
                        <div class="knob-container">
                            <span class="knob-label">IN</span>
                            <input type="range" class="comp-input" data-track="0" min="0" max="100" value="30">
                        </div>
                        <div class="knob-container">
                            <span class="knob-label">OUT</span>
                            <input type="range" class="comp-reduction" data-track="0" min="0" max="100" value="50">
                        </div>
                    </div>
                </div>

                <div class="control-group eq-section">
                    <label>EQ</label>
                    <div class="eq-controls">
                        <div class="knob-container">
                            <span class="knob-label">LO</span>
                            <input type="range" class="eq-low" data-track="0" min="-12" max="12" value="0">
                        </div>
                        <div class="knob-container">
                            <span class="knob-label">MID</span>
                            <input type="range" class="eq-mid" data-track="0" min="-12" max="12" value="0">
                        </div>
                        <div class="knob-container">
                            <span class="knob-label">HI</span>
                            <input type="range" class="eq-high" data-track="0" min="-12" max="12" value="0">
                        </div>
                    </div>
                </div>

                <div class="control-group">
                    <label>REVERB SEND</label>
                    <div class="knob-container">
                        <input type="range" class="reverb-send" data-track="0" min="0" max="100" value="0">
                    </div>
                </div>

                <div class="control-group speed-section">
                    <label>SPEED</label>
                    <div class="speed-controls">
                        <div class="knob-container">
                            <input type="range" class="speed" data-track="0" min="0" max="100" value="50">
                        </div>
                        <button class="rev-btn" data-track="0">REV</button>
                    </div>
                </div>
            </div>

            <div class="fader-section">
                <div class="fader-container">
                    <input type="range" class="channel-fader vertical-fader" data-track="0"
                           min="0" max="100" value="80" orient="vertical">
                    <div class="fader-value">80</div>
                </div>
                <div class="fader-label">CH 1</div>
                <div class="channel-buttons">
                    <button class="mute-btn" data-track="0">M</button>
                    <button class="solo-btn" data-track="0">S</button>
                    <button class="clear-btn" data-track="0">C</button>
                </div>
            </div>
        </div>

        <!-- Track 2 Channel Strip -->
        <div class="channel-strip" data-track="1">
            <div class="strip-header">
                <h3>CH 2</h3>
                <div class="audio-indicator"></div>
                <div class="header-buttons">
                    <button class="rec-btn" data-track="1">REC</button>
                    <button class="mode-btn active" data-track="1">LOOP</button>
                </div>
            </div>

            <div class="strip-controls">
                <div class="control-group compressor-section">
                    <label>COMP</label>
                    <div class="comp-controls">
                        <div class="knob-container">
                            <span class="knob-label">IN</span>
                            <input type="range" class="comp-input" data-track="1" min="0" max="100" value="30">
                        </div>
                        <div class="knob-container">
                            <span class="knob-label">OUT</span>
                            <input type="range" class="comp-reduction" data-track="1" min="0" max="100" value="50">
                        </div>
                    </div>
                </div>

                <div class="control-group eq-section">
                    <label>EQ</label>
                    <div class="eq-controls">
                        <div class="knob-container">
                            <span class="knob-label">LO</span>
                            <input type="range" class="eq-low" data-track="1" min="-12" max="12" value="0">
                        </div>
                        <div class="knob-container">
                            <span class="knob-label">MID</span>
                            <input type="range" class="eq-mid" data-track="1" min="-12" max="12" value="0">
                        </div>
                        <div class="knob-container">
                            <span class="knob-label">HI</span>
                            <input type="range" class="eq-high" data-track="1" min="-12" max="12" value="0">
                        </div>
                    </div>
                </div>

                <div class="control-group">
                    <label>REVERB SEND</label>
                    <div class="knob-container">
                        <input type="range" class="reverb-send" data-track="1" min="0" max="100" value="0">
                    </div>
                </div>

                <div class="control-group speed-section">
                    <label>SPEED</label>
                    <div class="speed-controls">
                        <div class="knob-container">
                            <input type="range" class="speed" data-track="1" min="0" max="100" value="50">
                        </div>
                        <button class="rev-btn" data-track="1">REV</button>
                    </div>
                </div>
            </div>

            <div class="fader-section">
                <div class="fader-container">
                    <input type="range" class="channel-fader vertical-fader" data-track="1"
                           min="0" max="100" value="80" orient="vertical">
                    <div class="fader-value">80</div>
                </div>
                <div class="fader-label">CH 2</div>
                <div class="channel-buttons">
                    <button class="mute-btn" data-track="1">M</button>
                    <button class="solo-btn" data-track="1">S</button>
                    <button class="clear-btn" data-track="1">C</button>
                </div>
            </div>
        </div>

        <!-- Track 3 Channel Strip -->
        <div class="channel-strip" data-track="2">
            <div class="strip-header">
                <h3>CH 3</h3>
                <div class="audio-indicator"></div>
                <div class="header-buttons">
                    <button class="rec-btn" data-track="2">REC</button>
                    <button class="mode-btn active" data-track="2">LOOP</button>
                </div>
            </div>

            <div class="strip-controls">
                <div class="control-group compressor-section">
                    <label>COMP</label>
                    <div class="comp-controls">
                        <div class="knob-container">
                            <span class="knob-label">IN</span>
                            <input type="range" class="comp-input" data-track="2" min="0" max="100" value="30">
                        </div>
                        <div class="knob-container">
                            <span class="knob-label">OUT</span>
                            <input type="range" class="comp-reduction" data-track="2" min="0" max="100" value="50">
                        </div>
                    </div>
                </div>

                <div class="control-group eq-section">
                    <label>EQ</label>
                    <div class="eq-controls">
                        <div class="knob-container">
                            <span class="knob-label">LO</span>
                            <input type="range" class="eq-low" data-track="2" min="-12" max="12" value="0">
                        </div>
                        <div class="knob-container">
                            <span class="knob-label">MID</span>
                            <input type="range" class="eq-mid" data-track="2" min="-12" max="12" value="0">
                        </div>
                        <div class="knob-container">
                            <span class="knob-label">HI</span>
                            <input type="range" class="eq-high" data-track="2" min="-12" max="12" value="0">
                        </div>
                    </div>
                </div>

                <div class="control-group">
                    <label>REVERB SEND</label>
                    <div class="knob-container">
                        <input type="range" class="reverb-send" data-track="2" min="0" max="100" value="0">
                    </div>
                </div>

                <div class="control-group speed-section">
                    <label>SPEED</label>
                    <div class="speed-controls">
                        <div class="knob-container">
                            <input type="range" class="speed" data-track="2" min="0" max="100" value="50">
                        </div>
                        <button class="rev-btn" data-track="2">REV</button>
                    </div>
                </div>
            </div>

            <div class="fader-section">
                <div class="fader-container">
                    <input type="range" class="channel-fader vertical-fader" data-track="2"
                           min="0" max="100" value="80" orient="vertical">
                    <div class="fader-value">80</div>
                </div>
                <div class="fader-label">CH 3</div>
                <div class="channel-buttons">
                    <button class="mute-btn" data-track="2">M</button>
                    <button class="solo-btn" data-track="2">S</button>
                    <button class="clear-btn" data-track="2">C</button>
                </div>
            </div>
        </div>

        <!-- Track 4 Channel Strip -->
        <div class="channel-strip" data-track="3">
            <div class="strip-header">
                <h3>CH 4</h3>
                <div class="audio-indicator"></div>
                <div class="header-buttons">
                    <button class="rec-btn" data-track="3">REC</button>
                    <button class="mode-btn active" data-track="3">LOOP</button>
                </div>
            </div>

            <div class="strip-controls">
                <div class="control-group compressor-section">
                    <label>COMP</label>
                    <div class="comp-controls">
                        <div class="knob-container">
                            <span class="knob-label">IN</span>
                            <input type="range" class="comp-input" data-track="3" min="0" max="100" value="30">
                        </div>
                        <div class="knob-container">
                            <span class="knob-label">OUT</span>
                            <input type="range" class="comp-reduction" data-track="3" min="0" max="100" value="50">
                        </div>
                    </div>
                </div>

                <div class="control-group eq-section">
                    <label>EQ</label>
                    <div class="eq-controls">
                        <div class="knob-container">
                            <span class="knob-label">LO</span>
                            <input type="range" class="eq-low" data-track="3" min="-12" max="12" value="0">
                        </div>
                        <div class="knob-container">
                            <span class="knob-label">MID</span>
                            <input type="range" class="eq-mid" data-track="3" min="-12" max="12" value="0">
                        </div>
                        <div class="knob-container">
                            <span class="knob-label">HI</span>
                            <input type="range" class="eq-high" data-track="3" min="-12" max="12" value="0">
                        </div>
                    </div>
                </div>

                <div class="control-group">
                    <label>REVERB SEND</label>
                    <div class="knob-container">
                        <input type="range" class="reverb-send" data-track="3" min="0" max="100" value="0">
                    </div>
                </div>

                <div class="control-group speed-section">
                    <label>SPEED</label>
                    <div class="speed-controls">
                        <div class="knob-container">
                            <input type="range" class="speed" data-track="3" min="0" max="100" value="50">
                        </div>
                        <button class="rev-btn" data-track="3">REV</button>
                    </div>
                </div>
            </div>

            <div class="fader-section">
                <div class="fader-container">
                    <input type="range" class="channel-fader vertical-fader" data-track="3"
                           min="0" max="100" value="80" orient="vertical">
                    <div class="fader-value">80</div>
                </div>
                <div class="fader-label">CH 4</div>
                <div class="channel-buttons">
                    <button class="mute-btn" data-track="3">M</button>
                    <button class="solo-btn" data-track="3">S</button>
                    <button class="clear-btn" data-track="3">C</button>
                </div>
            </div>
        </div>

        <!-- Master Channel Strip -->
        <div class="master-strip">
            <div class="strip-header">
                <h3>MASTER</h3>
                <div class="master-indicator"></div>
            </div>

            <div class="strip-controls">
                <div class="control-group eq-section">
                    <label>EQ</label>
                    <div class="eq-controls">
                        <div class="knob-container">
                            <span class="knob-label">LO</span>
                            <input type="range" class="master-eq-low" min="-12" max="12" value="0">
                        </div>
                        <div class="knob-container">
                            <span class="knob-label">MID</span>
                            <input type="range" class="master-eq-mid" min="-12" max="12" value="0">
                        </div>
                        <div class="knob-container">
                            <span class="knob-label">HI</span>
                            <input type="range" class="master-eq-high" min="-12" max="12" value="0">
                        </div>
                    </div>
                </div>

                <div class="control-group compressor-section">
                    <label>COMP</label>
                    <div class="comp-controls">
                        <div class="knob-container">
                            <span class="knob-label">IN</span>
                            <input type="range" class="master-comp-threshold" min="0" max="100" value="30">
                        </div>
                        <div class="knob-container">
                            <span class="knob-label">OUT</span>
                            <input type="range" class="master-comp-makeup" min="0" max="100" value="50">
                        </div>
                    </div>
                </div>

                <div class="control-group tape-section">
                    <label>TAPE</label>
                    <div class="tape-controls">
                        <div class="knob-container">
                            <span class="knob-label">SAT</span>
                            <input type="range" class="tape-saturation" min="0" max="100" value="0">
                        </div>
                        <div class="knob-container">
                            <span class="knob-label">WOW</span>
                            <input type="range" class="tape-wow" min="0" max="100" value="0">
                        </div>
                        <div class="knob-container">
                            <span class="knob-label">FLUT</span>
                            <input type="range" class="tape-flutter" min="0" max="100" value="0">
                        </div>
                        <div class="knob-container">
                            <span class="knob-label">DROP</span>
                            <input type="range" class="tape-dropouts" min="0" max="100" value="0">
                        </div>
                    </div>
                    <div class="tape-controls-row">
                        <div class="knob-container">
                            <span class="knob-label">HISS</span>
                            <input type="range" class="tape-hiss" min="0" max="100" value="0">
                        </div>
                        <div class="knob-container">
                            <span class="knob-label">AGE</span>
                            <input type="range" class="tape-age" min="0" max="100" value="0">
                        </div>
                    </div>
                    <button class="tape-bypass-btn active">ON</button>
                </div>

                <div class="control-group reverb-section">
                    <label>REVERB</label>
                    <div class="reverb-controls">
                        <div class="knob-container">
                            <span class="knob-label">SIZE</span>
                            <input type="range" class="master-reverb-size" min="0" max="100" value="70">
                        </div>
                        <div class="knob-container">
                            <span class="knob-label">MIX</span>
                            <input type="range" class="master-reverb-mix" min="0" max="100" value="15">
                        </div>
                    </div>
                </div>

                <div class="control-group limiter-section">
                    <label>LIMITER</label>
                    <div class="limiter-indicator">
                        <div class="limiter-led"></div>
                        <span class="limiter-text">ON</span>
                    </div>
                </div>

                <div class="control-group vu-section">
                    <label>OUTPUT</label>
                    <div class="vu-meters">
                        <canvas id="vu-left" width="40" height="120"></canvas>
                        <canvas id="vu-right" width="40" height="120"></canvas>
                    </div>
                </div>
            </div>

            <div class="fader-section master-fader-section">
                <div class="fader-container">
                    <input type="range" class="master-fader vertical-fader"
                           min="0" max="100" value="80" orient="vertical">
                    <div class="fader-value">80</div>
                </div>
                <div class="fader-label">MASTER</div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/tape-effects.js"></script>
    <script src="js/cassette-tape-bus.js"></script>
    <script src="js/track.js"></script>
    <script src="js/visualizer.js"></script>
    <script src="js/recorder.js"></script>
    <script src="js/knob.js"></script>
    <script src="js/ui.js"></script>
</body>
</html>
